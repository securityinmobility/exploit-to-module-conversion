from openai import OpenAI
from load_env import load_api_key
from typing import List, Dict

client = OpenAI(
    api_key=load_api_key()
)


def chat_with_gpt(chat_history: List[Dict[str, str]], model='gpt-4o', choices=1) -> str:
    response = client.chat.completions.create(
        model=model,
        messages=chat_history,
        n=choices
    )

    return [choice.message.content for choice in response.choices]